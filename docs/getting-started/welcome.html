<script src="https://unpkg.com/panic-overlay"></script>
<html>
  <head>
    <title>Error / SSG</title>
    <script>
      // BEWARE: This file is only baked in, when mode === `development`
      const connect = () => {
        console.log(`[hmr] trying to (re-)connect to: ${'ws://localhost:3000/livereload'}...`)
        const liveReloadSocket = new WebSocket('ws://localhost:3000/livereload')
        liveReloadSocket.onmessage = (event) => {
          const eventData = JSON.parse(event.data)
          if (eventData.operation === 'transform') {
            eventData.paths.forEach((path) => {
              let pathMatch = location.pathname === path
              console.log('HMR location.pathname', location.pathname, 'vs', path)
              if (location.pathname === '/' && (eventData.path === '/index.html' || eventData.path === '/index')) {
                pathMatch = true
              }
              if (!eventData.path || pathMatch) {
                document.location.reload()
              }
            })
          }
        }
        liveReloadSocket.onclose = () => {
          setTimeout(connect, 1000)
        }
      }
      connect()
    </script>

    <style>
      .panic-overlay__modal h1 {
        color: #f3e5ab !important;
      }

      .panic-overlay__error-type {
        color: #fff !important;
      }

      .panic-overlay__error-message {
        color: #999 !important;
      }

      .panic-overlay__line-hili {
        background: transparent !important;
        color: #f3e5ab !important;
      }

      .panic-overlay__close {
        color: #fff !important;
        opacity: 0.4 !important;
      }

      .panic-overlay__modal {
        background-color: #000 !important;
      }
      .panic-overlay__line-number {
        display: none !important;
      }
    </style>

    <script>
      ;`

./src/components/Footer.astro (or an included .astro component):
    throw err;
    ^
`
      throw new Error(`ENOENT: no such file or directory, open '/Users/aron/Code/vanil/www/package.json'`)
      // this happened in Node.js while rendering server-side!
      //
    </script>

    <script>
      setTimeout(() => {
        let selectedLine = document.querySelector('.panic-overlay__line-hili')

        if (selectedLine) {
          selectedLine.parentNode.removeChild(selectedLine)

          document.querySelectorAll('.panic-overlay__line')[1].className =
            'panic-overlay__line panic-overlay__line-hili'
        }
      }, 10)
    </script>
  </head>
</html>
